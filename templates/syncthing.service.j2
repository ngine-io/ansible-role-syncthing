# {{ ansible_managed }}
[Unit]
Description=Syncthing - Open Source Continuous File Synchronization
Documentation=man:syncthing(1)
After=network.target
StartLimitIntervalSec=60
StartLimitBurst=4

[Service]
Environment=HOME={{ syncthing__home_path }}
ExecStart=/usr/bin/syncthing serve --no-browser --no-restart --logflags=0 --home {{ syncthing__home_path }}
User={{ syncthing__user }}
Group={{ syncthing__group }}
Restart=on-failure
RestartSec=1
SuccessExitStatus=3 4
RestartForceExitStatus=3 4

# Hardening
ProtectSystem=off
PrivateTmp=true
SystemCallArchitectures=native
MemoryDenyWriteExecute=true
NoNewPrivileges=true

[Install]
WantedBy=multi-user.target
